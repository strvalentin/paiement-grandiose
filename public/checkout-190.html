<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Paiement sécurisé</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://js.stripe.com/v3/"></script>
  <style>
    /* Ton CSS habituel ici */
  </style>
</head>
<body>
  <img src="https://evgrandiose.fr/wp-content/uploads/2025/07/LOGO-17.png" alt="Logo EV Grandiose" class="logo">
  <h1>Paiement sécurisé</h1>
  <p>Coaching individuel – 190 €</p>

  <div class="container">
    <form id="payment-form">
      <div id="payment-element"></div>
      <button id="submit">Payer 190 €</button>
    </form>
    <p>Paiement 100 % sécurisé via Stripe.<br>Vous recevrez un email de confirmation.</p>
  </div>

  <script>
    const stripe = Stripe("pk_live_51MMqMKE6bw1rCi3S5g55yeII1xcJ75DnmRwYQBqxUTzN8yiuyl7D7gfaSXIBWwRYX2n23L9EyWdIhpL0WFYfZ3ib009gI7DcwD");
    let elements;

    fetch("/create-payment-intent-190", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
    })
    .then((res) => res.json())
    .then(({ clientSecret }) => {
      elements = stripe.elements({ clientSecret });
      const paymentElement = elements.create("payment");
      paymentElement.mount("#payment-element");
    });

    const form = document.getElementById("payment-form");
    form.addEventListener("submit", async (event) => {
      event.preventDefault();

      const { error } = await stripe.confirmPayment({
        elements,
        confirmParams: {
          // Redirection corrigée vers ta page système.io
          return_url: "https://evgrandiose.systeme.io/confirmation-coaching",
        },
      });
      if (error) alert(error.message);
    });
  </script>
</body>
</html>
